[gd_scene load_steps=39 format=3 uid="uid://dqjwfb7v30oht"]

[ext_resource type="Script" path="res://systems/follow_cam.gd" id="1_k2bgo"]
[ext_resource type="Texture2D" uid="uid://fd10ymbmrxc2" path="res://assets/tower/Tower Base-1.png(1).png" id="1_s1gq3"]
[ext_resource type="PackedScene" uid="uid://k3xhnojhg2vg" path="res://scenes/player.tscn" id="1_ucno6"]
[ext_resource type="PackedScene" uid="uid://cv6onxigv60s7" path="res://scenes/mainmenu.tscn" id="2_3djux"]
[ext_resource type="Script" path="res://systems/ui_manager.gd" id="3_0wqh7"]
[ext_resource type="PackedScene" uid="uid://d3tiwo8ub427f" path="res://scenes/tutorialmenu.tscn" id="3_rtmu4"]
[ext_resource type="Script" path="res://scenes/block_container_area.gd" id="5_qduty"]
[ext_resource type="PackedScene" uid="uid://b2qeydgwpvtr2" path="res://scenes/winscreen.tscn" id="5_yanaa"]
[ext_resource type="Texture2D" uid="uid://dg664vyrc1lpl" path="res://assets/tower/ground_infinit extension.png" id="6_cg67q"]
[ext_resource type="Texture2D" uid="uid://cxtunhe6p13h8" path="res://assets/tower/ground.png" id="7_56t36"]
[ext_resource type="Script" path="res://systems/cursor.gd" id="8_a2omg"]
[ext_resource type="Texture2D" uid="uid://bt3u8ltfkj0w6" path="res://assets/tower/crowd.png" id="8_w0b8g"]
[ext_resource type="PackedScene" path="res://assets/real_blocks/bronze_wide_block_city.tscn" id="9_8nl5q"]
[ext_resource type="Texture2D" uid="uid://dgbteoggr04ld" path="res://assets/ui_elements/scroll.png" id="10_gl0ha"]
[ext_resource type="PackedScene" path="res://assets/real_blocks/bronze_wide_block_skulls.tscn" id="10_hf14v"]
[ext_resource type="PackedScene" path="res://assets/real_blocks/bronze_wide_block_sky.tscn" id="11_ffo8g"]
[ext_resource type="Script" path="res://scenes/scale_tower_button.gd" id="11_ip2vg"]
[ext_resource type="PackedScene" path="res://assets/real_blocks/cauldren_black.tscn" id="12_uyefo"]
[ext_resource type="Script" path="res://systems/tower_area.gd" id="13_163k7"]
[ext_resource type="PackedScene" path="res://assets/real_blocks/cauldren_green.tscn" id="13_dutyy"]
[ext_resource type="PackedScene" path="res://assets/real_blocks/cauldren_purple.tscn" id="14_hgi4b"]
[ext_resource type="PackedScene" path="res://assets/real_blocks/cauldren_red.tscn" id="15_63ipp"]
[ext_resource type="PackedScene" path="res://assets/real_blocks/ice_wide_block_city.tscn" id="16_6pbn7"]
[ext_resource type="PackedScene" path="res://assets/real_blocks/ice_wide_block_skulls.tscn" id="17_3csh1"]
[ext_resource type="PackedScene" path="res://assets/real_blocks/ice_wide_block_sky.tscn" id="18_8gps5"]
[ext_resource type="PackedScene" path="res://assets/real_blocks/square_candles.tscn" id="19_j4tuq"]
[ext_resource type="PackedScene" path="res://assets/real_blocks/square_hat.tscn" id="20_81kgl"]
[ext_resource type="PackedScene" path="res://assets/real_blocks/square_hourglass.tscn" id="21_fh6l5"]
[ext_resource type="PackedScene" path="res://assets/real_blocks/square_tower.tscn" id="22_kdmlc"]
[ext_resource type="PackedScene" uid="uid://spa6knrjc32h" path="res://scenes/countdowntimer.tscn" id="24_6ap04"]

[sub_resource type="Gradient" id="Gradient_mjvv7"]
colors = PackedColorArray(0.0776302, 0.102834, 0.327013, 1, 0.421007, 0.493041, 0.631455, 1)

[sub_resource type="GradientTexture2D" id="GradientTexture2D_f0iah"]
gradient = SubResource("Gradient_mjvv7")
width = 128
height = 128
fill_to = Vector2(0, 1)

[sub_resource type="CircleShape2D" id="CircleShape2D_c7x32"]
radius = 52.0865

[sub_resource type="WorldBoundaryShape2D" id="WorldBoundaryShape2D_1ew2j"]

[sub_resource type="CanvasItemMaterial" id="CanvasItemMaterial_p1rrr"]

[sub_resource type="Gradient" id="Gradient_10xlx"]
colors = PackedColorArray(0.92549, 0.776471, 0.454902, 1, 0.590315, 0.466917, 0.181511, 1)

[sub_resource type="GradientTexture2D" id="GradientTexture2D_gmbwd"]
gradient = SubResource("Gradient_10xlx")
fill_to = Vector2(0, 1)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_073lb"]
size = Vector2(272, 3908.5)

[node name="Main" type="Node2D"]

[node name="Parallax2D" type="Parallax2D" parent="."]
scroll_scale = Vector2(0.5, 0.5)

[node name="Sprite2D" type="Sprite2D" parent="Parallax2D"]
position = Vector2(23, -866)
scale = Vector2(142.094, 21.1875)
texture = SubResource("GradientTexture2D_f0iah")

[node name="Tower" type="Node2D" parent="."]

[node name="TowerBase-1_png(1)" type="Sprite2D" parent="Tower"]
position = Vector2(0, 71)
texture = ExtResource("1_s1gq3")

[node name="Scale Camera" type="Camera2D" parent="." node_paths=PackedStringArray("follow_target")]
position_smoothing_enabled = true
rotation_smoothing_enabled = true
script = ExtResource("1_k2bgo")
follow_target = NodePath("../Player")
move_speed = 800.0

[node name="UserInterfaceManager" type="CanvasLayer" parent="." node_paths=PackedStringArray("game_timer", "build_screen", "main_menu", "tutorial_menu", "end_menu")]
script = ExtResource("3_0wqh7")
game_timer = NodePath("GameTimer")
build_screen = NodePath("Buildscreen")
main_menu = NodePath("Main Menu")
tutorial_menu = NodePath("tutorial menu")
end_menu = NodePath("EndMenu")

[node name="Main Menu" parent="UserInterfaceManager" node_paths=PackedStringArray("menu_tutorial") instance=ExtResource("2_3djux")]
size_flags_horizontal = 4
menu_tutorial = NodePath("../tutorial menu")

[node name="tutorial menu" parent="UserInterfaceManager" instance=ExtResource("3_rtmu4")]
visible = false
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
size_flags_horizontal = 4

[node name="Buildscreen" type="Node2D" parent="UserInterfaceManager"]
visible = false

[node name="Cursor" type="Node2D" parent="UserInterfaceManager/Buildscreen" node_paths=PackedStringArray("block_container_area", "placed_block_container")]
script = ExtResource("8_a2omg")
block_container_area = NodePath("../BlockContainerArea")
placed_block_container = NodePath("../../../BlocksContianer")

[node name="CursorArea" type="Area2D" parent="UserInterfaceManager/Buildscreen/Cursor"]

[node name="CollisionShape2D" type="CollisionShape2D" parent="UserInterfaceManager/Buildscreen/Cursor/CursorArea"]
shape = SubResource("CircleShape2D_c7x32")

[node name="BlockContainerArea" type="Node2D" parent="UserInterfaceManager/Buildscreen" node_paths=PackedStringArray("positions")]
top_level = true
position = Vector2(952, 324)
script = ExtResource("5_qduty")
blocks = Array[PackedScene]([ExtResource("9_8nl5q"), ExtResource("10_hf14v"), ExtResource("11_ffo8g"), ExtResource("12_uyefo"), ExtResource("13_dutyy"), ExtResource("14_hgi4b"), ExtResource("15_63ipp"), ExtResource("16_6pbn7"), ExtResource("17_3csh1"), ExtResource("18_8gps5"), ExtResource("19_j4tuq"), ExtResource("20_81kgl"), ExtResource("21_fh6l5"), ExtResource("22_kdmlc")])
positions = [NodePath("Position 1"), NodePath("Position 2"), NodePath("Position 3"), NodePath("Position 4")]

[node name="Sprite2D" type="Sprite2D" parent="UserInterfaceManager/Buildscreen/BlockContainerArea"]
z_index = -1
position = Vector2(38, -3)
scale = Vector2(2.40625, 2.40625)
texture = ExtResource("10_gl0ha")

[node name="Position 1" type="Node2D" parent="UserInterfaceManager/Buildscreen/BlockContainerArea"]
position = Vector2(-50, -50)

[node name="Position 2" type="Node2D" parent="UserInterfaceManager/Buildscreen/BlockContainerArea"]
position = Vector2(50, -50)

[node name="Position 3" type="Node2D" parent="UserInterfaceManager/Buildscreen/BlockContainerArea"]
position = Vector2(-50, 50)

[node name="Position 4" type="Node2D" parent="UserInterfaceManager/Buildscreen/BlockContainerArea"]
position = Vector2(50, 50)

[node name="ScaleTowerButton" type="Button" parent="UserInterfaceManager/Buildscreen" node_paths=PackedStringArray("buildscreen")]
anchors_preset = 6
anchor_left = 1.0
anchor_top = 0.5
anchor_right = 1.0
anchor_bottom = 0.5
offset_left = 890.0
offset_top = 495.0
offset_right = 1091.0
offset_bottom = 568.0
grow_horizontal = 0
grow_vertical = 2
theme_override_font_sizes/font_size = 25
text = "Scale the tower!"
script = ExtResource("11_ip2vg")
buildscreen = NodePath("..")

[node name="GameTimer" parent="UserInterfaceManager" instance=ExtResource("24_6ap04")]
visible = false

[node name="EndMenu" parent="UserInterfaceManager" instance=ExtResource("5_yanaa")]
visible = false

[node name="Label" type="Label" parent="UserInterfaceManager"]
offset_top = 197.0
offset_right = 221.0
offset_bottom = 220.0
text = "This is the height reached lol"

[node name="Player" parent="." node_paths=PackedStringArray("height_label") instance=ExtResource("1_ucno6")]
position = Vector2(0, 107.295)
height_label = NodePath("../UserInterfaceManager/Label")

[node name="Floor" type="StaticBody2D" parent="."]
position = Vector2(0, 132)

[node name="Collider" type="CollisionShape2D" parent="Floor"]
shape = SubResource("WorldBoundaryShape2D_1ew2j")

[node name="Ground lower gradient" type="Sprite2D" parent="Floor"]
material = SubResource("CanvasItemMaterial_p1rrr")
position = Vector2(0, 132)
scale = Vector2(50.25, 3.21875)
texture = SubResource("GradientTexture2D_gmbwd")

[node name="grass" type="Sprite2D" parent="Floor"]
texture_repeat = 2
material = SubResource("CanvasItemMaterial_p1rrr")
position = Vector2(1943, -5)
texture = ExtResource("6_cg67q")
region_enabled = true
region_rect = Rect2(-1501.52, 0, 3502.75, 250)

[node name="grass2" type="Sprite2D" parent="Floor"]
texture_repeat = 2
material = SubResource("CanvasItemMaterial_p1rrr")
position = Vector2(-1943, -5)
texture = ExtResource("6_cg67q")
region_enabled = true
region_rect = Rect2(-1501.52, 0, 3502.75, 250)

[node name="Ground" type="Sprite2D" parent="Floor"]
material = SubResource("CanvasItemMaterial_p1rrr")
position = Vector2(0, -50)
texture = ExtResource("7_56t36")

[node name="Crowd" type="Sprite2D" parent="Floor"]
position = Vector2(-5, -20)
texture = ExtResource("8_w0b8g")

[node name="Crowd2" type="Sprite2D" parent="Floor"]
position = Vector2(-7, -5)
scale = Vector2(-1, 1)
texture = ExtResource("8_w0b8g")

[node name="TowerArea" type="Area2D" parent="."]
position = Vector2(0, -165)
script = ExtResource("13_163k7")

[node name="CollisionShape2D" type="CollisionShape2D" parent="TowerArea"]
position = Vector2(0, -1664.25)
shape = SubResource("RectangleShape2D_073lb")

[node name="BlocksContianer" type="Node2D" parent="."]

[connection signal="body_entered" from="UserInterfaceManager/Buildscreen/Cursor/CursorArea" to="UserInterfaceManager/Buildscreen/Cursor" method="_on_cursor_area_body_entered"]
[connection signal="body_exited" from="UserInterfaceManager/Buildscreen/Cursor/CursorArea" to="UserInterfaceManager/Buildscreen/Cursor" method="_on_cursor_area_body_exited"]
